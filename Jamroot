# Distributed under the Boost Software License, Version 1.0.
# See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt

import fhs ;
import testing ;

lib boost_thread : : $(LIB_SEARCH) ;
lib boost_program_options : : $(LIB_SEARCH) ;
lib boost_filesystem : : $(LIB_SEARCH) ;
lib boost_regex : : $(LIB_SEARCH) ;
lib boost_iostreams : : $(LIB_SEARCH) ;
lib boost_date_time : : $(LIB_SEARCH) ;
lib boost_system : : $(LIB_SEARCH) ;
lib boost_log : : $(LIB_SEARCH) ;
lib boost_test_exec_monitor : : $(LIB_SEARCH) ;

project libtenum : requirements
  <library>boost_thread
  <library>boost_program_options
  <library>boost_filesystem
  <library>boost_regex
  <library>boost_iostreams
  <library>boost_date_time
  <library>boost_system
  <library>boost_test_exec_monitor
  <include>include/
  
  $(INCLUDES)
  <tag>@$(__name__).tag
  <address-model>32:<instruction-set>i686

  <threading>multi
  : default-build debug ;

variant debug_c98 : debug : <cflags>--std=c++98 ;
variant debug_c0x : debug : <cflags>--std=c++0x ;
variant release_c98 : release : <cflags>--std=c++98 ;
variant release_c0x : release : <cflags>--std=c++0x ;

unit-test test_static_enum : test/test_static_enum.cpp ;
unit-test test_dynamic_enum : test/test_dynamic_enum.cpp ;
unit-test test_bit_flag : test/test_bit_flag.cpp ;

alias tests_debug_c0x
  : test_static_enum
    test_dynamic_enum
    test_bit_flag
  : <variant>debug_c0x ;

alias tests_release_c0x
  : test_static_enum
    test_dynamic_enum
    test_bit_flag
  : <variant>release_c0x ;
  
alias tests_debug_c98
  : test_static_enum
    test_dynamic_enum
    test_bit_flag
  : <variant>debug_c98 ;

alias tests_release_c98
  : test_static_enum
    test_dynamic_enum
    test_bit_flag
  : <variant>release_c98 ;

alias tests : tests_debug_c98 tests_release_c98 tests_debug_c0x tests_release_c0x ;

alias build : tests ;

fhs.install install libtenum
                    :
                    :
                    : [ path.glob-tree include/ : *.* : ]
                    : <install-source-root>./include/
                      <target-address-models>32
                      <target-address-models>64 ;
